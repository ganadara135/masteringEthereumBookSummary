# Cryptography
암호기술은 이더리움의 기반 기술임으  
암호기술은 비밀번호를 노출하지 않고 비밀작성문으로 증명할 수 있고(디지털서명)  
데이터 인증을 증명할 수 있음(디지털 핑커프린트-해시)  
현재까지는 이더리움 프로토콜은 노드간 통신에 암호화를 사용하지 않음  
따라서 누구나 데이터를 볼 수 있으므로 컨센서스나 상태 변화를 증명할 수 있음  
향후에 영지식증명과 동형암호 기술을 적용할 예정임  
본 챕터에서는 공개키 암호기술을 알아본다.  

## Keys and Addresses
이더리움은 두가지 형태의 계정이 있음(EOA and Contract)  
EOA 에 의한 이더 소유권은 비밀키, 이더리움 주소, 디지털 서명으로 만들어 짐  
비밀키는 이더리움과 사용자간의 모든 상호작용에 핵심임  
계정 주소는 비밀키로 부터 직접적으로 추출됨  
비밀키가 고유한 이더리움 주소를 결정함  
오직 계정 주소와 디지털 서명만 전송되고 이더리움 시스템에 저장됨  
이더리움 트랜잭션은 블록체인에 담기위해서는 유효한 디지털 서명을 요구함  
공개키는 은행 계정 넘버와 같고, 비밀키는 핀번호와 같음  
비밀키는 자체는 암호화된 파일로 관리되거나 이더리움 지갑 프로그램으로 관리함  

## Pulbic Key Cryptography and Cryptocurrency
(공개키 암호기술과 암호화폐)

공개키 암호기술은 현대 정보 보안에 핵심(비대칭 암호기술)  
1970년에 키 교환 프로토콜을 목적으로 등장함  
공개키 암호기술은 정보를 보호하기 위해서 유일한 키를 사용  
이런 키들은 특별한 수학 함수를 사용함  
고유키를 얻는계산은 쉬우나, 역으로 계산하기는 힘듦  
이런 함수를 기반으로 예측할 수 없는 디지털 서명이나 디지털 시크릿을 만듦  
두 개의 아주 큰 소수를 곱하기는 쉬우나, 역으로 두 소수를 찾아 내기는 힘듦  

Trapdoor 함수는 위에 특별한 경우로서 두 개의 소수 중에 하나를 알면 나머지를 금방 구할 수 있음 

Elliptic curve 함수는 Trapdoor(옆길, 약점) 가 없는 함수 이다  
소수의 나머지 곱셈은 쉽우나,  나누기는 현실적으로 불가함  
이런 경우를 이산 대수라고 함  

디지털서명은 어떤 평문이 든지 사인을 통해서 만들 수 있음  
이더리움 트랜잭션 자체가 메시지로서 사용된다  
비밀키가 타원 곡선 암호기술을 사용해서 트랜잭션에 디지털 서명을 담는다  
스마트컨트랙트나 잔고에서 이더가 움직이려면 
이더리움 네트워크에 트랜잭션을 보낸다  
이때 이더리움 주소와 연관된 비밀키로 만들어진 디지털 서명도 함께 보내짐  
트랜젹션 정보와 이더리움 주소를 디지털 서명과 매칭하여서  
누구나 트랜잭션을 검증할 수 있음  
검증 과정엔 비밀키가 전혀 필요 없음  

# Private Keys(비밀키, 개인키)
비밀키는 랜덤으로 만들어진 숫자이다  
비밀키는 디지털 서명을 만들기 위해서 사용됨  

## Generating a Private Key from a Random Number
(랜덤수로 비밀키 만들기)  

키를 만드는 것의 핵심은 엔트로피(랜덤성)의 안전한 원천을 찾는 것임  

비밀키는 2^256 (78-digit number) 1.158 x 10^77  범위의 숫자를 사용    
위 범위에서 비밀키는 정확히 첫 38 digits 을 사용함  
비밀키 생성 순서
- 256-bit number 랜덤하게 선택  
- 선택한 수가 유효범위인지 체크  
- Keccak-256 or SHA-256 해시 함수 사용  
- 위 함수는 문자열을 넣으면 256-bit 해시 숫자값 나옴  
- 위 결과가 유효범위만 비밀키로 사용, 아니면 위 결과 반복  

비밀키 생성 과정은 오프라인 상태에서 진행됨  
아래 문자가 비밀키 예제임(64 Hexadecimal digits, 각 4비트씩 풀면 256 비트임)
```
f8f8a2f43c8376ccb0871305060d7b27b0554d2cc72bccf41b2705608452f315
```

# Public Keys
이더리움 공개키는 Elliptic curve 의 점이다.  
Elliptic curve 방정식을 만족하는 x, y 좌표의 집합임  
이더리움 공개키는 두 숫자 집단이다  
이 숫자들은 오직 한 방향으로만 움직이는 계산식을 통해서 비밀키로 부터 만들어짐  
비밀키로부터 공개키를 연산하기는 쉽지만, 그 반대는 어려움  
공개키는 elliptic curve 곱셈에 비밀키를 사용해서 만들어 짐  
```
K = k * G
```






